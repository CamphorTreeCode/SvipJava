<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.shensu.dao.ShopTypeMapper">
  <resultMap id="BaseResultMap" type="com.shensu.pojo.ShopType">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="shopTypeId" jdbcType="INTEGER" property="shoptypeid" />
    <result column="shopTypeName" jdbcType="VARCHAR" property="shoptypename" />
    <result column="shopTypeCreateTime" jdbcType="VARCHAR" property="shoptypecreatetime" />
    <result column="shopTypeImg" jdbcType="VARCHAR" property="shoptypeimg" />    
  </resultMap>
    <resultMap id="BaseResultMap1" type="com.shensu.pojo.ShopType">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="shopTypeId" jdbcType="INTEGER" property="shoptypeid" />
    <result column="shopTypeName" jdbcType="VARCHAR" property="shoptypename" />
    <result column="shopTypeCreateTime" jdbcType="VARCHAR" property="shoptypecreatetime" />
    <result column="shopTypeImg" jdbcType="VARCHAR" property="shoptypeimg" />    
    <collection property="shop" column="shopTypeId" select="com.shensu.dao.ShopMapper.findHomePageShop" javaType="java.util.List"  ofType="com.shensu.pojo.Shop">
              
     </collection>
  </resultMap>
  

  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    shopTypeId, shopTypeName, shopTypeCreateTime,shopTypeImg
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from ShopType
    where shopTypeId = #{shoptypeid,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from ShopType
    where shopTypeId = #{shoptypeid,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.shensu.pojo.ShopType">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into ShopType (shopTypeId, shopTypeName, shopTypeCreateTime,shopTypeImg
      )
    values (#{shoptypeid,jdbcType=INTEGER}, #{shoptypename,jdbcType=VARCHAR}, #{shoptypecreatetime,jdbcType=VARCHAR},
    		#{shoptypeimg,jdbcType=VARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.shensu.pojo.ShopType">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into ShopType
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="shoptypeid != null">
        shopTypeId,
      </if>
      <if test="shoptypename != null">
        shopTypeName,
      </if>
      <if test="shoptypecreatetime != null">
        shopTypeCreateTime,
      </if>
      <if test="shoptypeimg != null">
        shopTypeImg,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="shoptypeid != null">
        #{shoptypeid,jdbcType=INTEGER},
      </if>
      <if test="shoptypename != null">
        #{shoptypename,jdbcType=VARCHAR},
      </if>
      <if test="shoptypecreatetime != null">
        #{shoptypecreatetime,jdbcType=VARCHAR},
      </if>
      <if test="shoptypeimg != null">
        #{shoptypeimg,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.shensu.pojo.ShopType">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update ShopType
    <set>
      <if test="shoptypename != null">
        shopTypeName = #{shoptypename,jdbcType=VARCHAR},
      </if>
      <if test="shoptypecreatetime != null">
        shopTypeCreateTime = #{shoptypecreatetime,jdbcType=VARCHAR},
      </if>
      <if test="shoptypeimg != null">
        shopTypeImg = #{shoptypeimg,jdbcType=VARCHAR},
      </if>
    </set>
    where shopTypeId = #{shoptypeid,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.shensu.pojo.ShopType">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update ShopType
    set shopTypeName = #{shoptypename,jdbcType=VARCHAR},
      shopTypeCreateTime = #{shoptypecreatetime,jdbcType=VARCHAR},
      shopTypeImg = #{shoptypeimg,jdbcType=VARCHAR}
    where shopTypeId = #{shoptypeid,jdbcType=INTEGER}
  </update>
  
  <!-- 查询全部 -->
  <select id="selectAll" resultMap="BaseResultMap">
     select * from ShopType
  </select>
  
  <!-- 替换商品类目的展示图片 -->
  <update id="updateShopTypeImg" parameterType="com.shensu.pojo.ShopType">
    update ShopType
    <set>
      <if test="shoptypename != null">
        shopTypeName = #{shoptypename,jdbcType=VARCHAR},
      </if>
      <if test="shoptypecreatetime != null">
        shopTypeCreateTime = #{shoptypecreatetime,jdbcType=VARCHAR},
      </if>
      <if test="shoptypeimg != null">
        shopTypeImg = #{shoptypeimg,jdbcType=VARCHAR},
      </if>
    </set>
    where shopTypeId = #{shoptypeid,jdbcType=INTEGER}
  </update>
  
  <!-- 删除商品类目展示图 -->
  <update id="deleteShopTypeImg" parameterType="com.shensu.pojo.ShopType">
 	update 
 		ShopType
 	set
        shopTypeImg = null
    where shopTypeId = #{shoptypeid,jdbcType=INTEGER}
  </update>
  
  <!-- 根据商品类目id显示首页展示图信息 -->
  <select id="findShopTypeImg" resultMap="BaseResultMap">
     select 
     	shopTypeName, shopTypeImg
     from 
     	ShopType
     where 
     	shopTypeId = #{shoptypeid,jdbcType=INTEGER}
  </select>
  
  <!--根据商品类目id查询出商品的图片(小程序)-->
  <select id="findShopType" resultMap="BaseResultMap">
     select 
     	shopTypeImg, shopTypeName
     from 
     	ShopType
  </select>
    <!-- 微信小程序 每个分类查询商品的前两个商品 -->
  <select id="selectShopTypeTwo" resultMap="BaseResultMap1">
     select * from ShopType
  </select>
  
  <!-- 根据商品类别名查找商品Id -->
  <select id="getShopTypeIdByName" resultType="Integer">
        select shopTypeId from ShopType where shopTypeName=#{shopTypeName}
  </select>
  
  <!-- 查询全部类目(除了本条之外的)-->
  <select id="editShopTypeXY" resultMap="BaseResultMap">
    select  
		shopTypeId, 
		shopTypeName, 
		shopTypeCreateTime,
		shopTypeImg
	from 
		ShopType s1
	where not exists (
			select 
				s1.shopTypeId
			from 
				ShopType s2
			where 
				s1.shopTypeId = #{shoptypeid,jdbcType=INTEGER}
		)

  </select>
  
  
  
</mapper>