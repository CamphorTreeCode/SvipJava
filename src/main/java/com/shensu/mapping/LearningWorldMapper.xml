<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.shensu.dao.LearningWorldMapper">
  <resultMap id="BaseResultMap" type="com.shensu.pojo.LearningWorld">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="learningWorldId" jdbcType="INTEGER" property="learningworldid" />
    <result column="learningWorldTitle" jdbcType="VARCHAR" property="learningworldtitle" />
    <result column="learningWorldVideoUrl" jdbcType="VARCHAR" property="learningworldvideourl" />
    <result column="learningWorldVideoImgUrl" jdbcType="VARCHAR" property="learningworldvideoimgurl" />
    <result column="learningWorldCreatTime" jdbcType="VARCHAR" property="learningworldcreattime" />
    <result column="learningWorldBrowse" jdbcType="INTEGER" property="learningworldbrowse" />
    <result column="learningWorldFabulous" jdbcType="INTEGER" property="learningworldfabulous" />
    <result column="learningWorldState" jdbcType="INTEGER" property="learningworldstate" />
    <result column="learningWorldForward" jdbcType="INTEGER" property="learningWorldForward" />   
    <result column="draftState" jdbcType="INTEGER" property="draftstate" />
    <collection property="learningWorldImg" column="learningWorldId" javaType="java.util.List"  ofType="com.woman.pojo.learningWorldImg" select="findBylearningWorldId">
        <id column="learningWorldImgId" jdbcType="INTEGER" property="learningworldimgid" />
    </collection>
    </resultMap>
  <resultMap extends="BaseResultMap" id="ResultMapWithBLOBs" type="com.shensu.pojo.LearningWorld">
    <result column="learningWorldContent" jdbcType="LONGVARCHAR" property="learningworldcontent" />
  </resultMap>
  
  <resultMap id="BaseResultMap1" type="com.shensu.pojo.LearningWorld">
    <id column="learningWorldId" jdbcType="INTEGER" property="learningworldid" />
    <result column="learningWorldTitle" jdbcType="VARCHAR" property="learningworldtitle" />
    <result column="learningWorldVideoUrl" jdbcType="VARCHAR" property="learningworldvideourl" />
    <result column="learningWorldVideoImgUrl" jdbcType="VARCHAR" property="learningworldvideoimgurl" />
    <result column="learningWorldCreatTime" jdbcType="VARCHAR" property="learningworldcreattime" />
    <result column="learningWorldBrowse" jdbcType="INTEGER" property="learningworldbrowse" />
    <result column="learningWorldFabulous" jdbcType="INTEGER" property="learningworldfabulous" />
    <result column="learningWorldState" jdbcType="INTEGER" property="learningworldstate" />
    <result column="draftState" jdbcType="INTEGER" property="draftstate" />
    <result column="learningWorldForward" jdbcType="INTEGER" property="learningWorldForward" />   
    <collection property="learningWorldImg" column="learningWorldId" javaType="java.util.List"  ofType="com.woman.pojo.learningWorldImg" select="findAllLearningWorld">
    </collection>
    </resultMap>
  
  
  <sql id="Base_Column_List">
    learningWorldId, learningWorldTitle, learningWorldVideoUrl, learningWorldCreatTime, 
    learningWorldBrowse, learningWorldFabulous, learningWorldState, draftState,learningWorldForward
  </sql>
  
  <sql id="Blob_Column_List">
    learningWorldContent
  </sql>
  
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="ResultMapWithBLOBs">
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from LearningWorld
    where learningWorldId = #{learningworldid,jdbcType=INTEGER}
  </select>
  
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    delete from LearningWorld
    where learningWorldId = #{learningworldid,jdbcType=INTEGER}
  </delete>
  
  <insert id="insert" parameterType="com.shensu.pojo.LearningWorld">
    insert into LearningWorld (learningWorldId, learningWorldTitle, 
      learningWorldVideoUrl, learningWorldCreatTime, 
      learningWorldBrowse, learningWorldFabulous, 
      learningWorldState, learningWorldContent, draftState
      )
    values (#{learningworldid,jdbcType=INTEGER}, #{learningworldtitle,jdbcType=VARCHAR}, 
      #{learningworldvideourl,jdbcType=VARCHAR}, #{learningworldcreattime,jdbcType=VARCHAR}, 
      #{learningworldbrowse,jdbcType=INTEGER}, #{learningworldfabulous,jdbcType=INTEGER}, 
      #{learningworldstate,jdbcType=INTEGER}, #{learningworldcontent,jdbcType=LONGVARCHAR},
      #{draftstate,jdbcType=LONGVARCHAR}
      )
  </insert>
  
  <insert id="insertSelective" 
  useGeneratedKeys="true" keyProperty="learningworldid"
  parameterType="com.shensu.pojo.LearningWorld">
    insert into LearningWorld
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="learningworldid != null">
        learningWorldId,
      </if>
      <if test="learningworldtitle != null">
        learningWorldTitle,
      </if>
      <if test="learningworldvideourl != null">
        learningWorldVideoUrl,
      </if>
      <if test="learningworldvideoimgurl != null">
        learningWorldVideoImgUrl,
      </if>
      <if test="learningworldcreattime != null">
        learningWorldCreatTime,
      </if>
      <if test="learningworldbrowse != null">
        learningWorldBrowse,
      </if>
      <if test="learningworldfabulous != null">
        learningWorldFabulous,
      </if>
      <if test="learningworldstate != null">
        learningWorldState,
      </if>
      <if test="learningworldcontent != null">
        learningWorldContent,
      </if>
      <if test="draftstate != null">
        draftState,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="learningworldid != null">
        #{learningworldid,jdbcType=INTEGER},
      </if>
      <if test="learningworldtitle != null">
        #{learningworldtitle,jdbcType=VARCHAR},
      </if>
      <if test="learningworldvideourl != null">
        #{learningworldvideourl,jdbcType=VARCHAR},
      </if>
      <if test="learningworldvideoimgurl != null">
        #{learningworldvideoimgurl,jdbcType=VARCHAR},
      </if>
      <if test="learningworldcreattime != null">
        #{learningworldcreattime,jdbcType=VARCHAR},
      </if>
      <if test="learningworldbrowse != null">
        #{learningworldbrowse,jdbcType=INTEGER},
      </if>
      <if test="learningworldfabulous != null">
        #{learningworldfabulous,jdbcType=INTEGER},
      </if>
      <if test="learningworldstate != null">
        #{learningworldstate,jdbcType=INTEGER},
      </if>
      <if test="learningworldcontent != null">
        #{learningworldcontent,jdbcType=LONGVARCHAR},
      </if>
      <if test="draftstate != null">
        #{draftstate,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  
  <update id="updateByPrimaryKeySelective" parameterType="com.shensu.pojo.LearningWorld">
    update LearningWorld
    <set>
      <if test="learningworldtitle != null">
        learningWorldTitle = #{learningworldtitle,jdbcType=VARCHAR},
      </if>
      <if test="learningworldvideourl != null">
        learningWorldVideoUrl = #{learningworldvideourl,jdbcType=VARCHAR},
      </if>
      <if test="learningworldvideoimgurl != null">
        learningWorldVideoImgUrl = #{learningworldvideoimgurl,jdbcType=VARCHAR},
      </if>
      <if test="learningworldcreattime != null">
        learningWorldCreatTime = #{learningworldcreattime,jdbcType=VARCHAR},
      </if>
      <if test="learningworldbrowse != null">
        learningWorldBrowse = #{learningworldbrowse,jdbcType=INTEGER},
      </if>
      <if test="learningworldfabulous != null">
        learningWorldFabulous = #{learningworldfabulous,jdbcType=INTEGER},
      </if>
      <if test="learningworldstate != null">
        learningWorldState = #{learningworldstate,jdbcType=INTEGER},
      </if>
      <if test="learningworldcontent != null">
        learningWorldContent = #{learningworldcontent,jdbcType=LONGVARCHAR},
      </if>
      <if test="draftstate != null">
        draftState = #{draftstate,jdbcType=INTEGER},
      </if>
    </set>
    where learningWorldId = #{learningworldid,jdbcType=INTEGER}
  </update>
  
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.shensu.pojo.LearningWorld">
    update LearningWorld
    set learningWorldTitle = #{learningworldtitle,jdbcType=VARCHAR},
      learningWorldVideoUrl = #{learningworldvideourl,jdbcType=VARCHAR},
      learningWorldCreatTime = #{learningworldcreattime,jdbcType=VARCHAR},
      learningWorldBrowse = #{learningworldbrowse,jdbcType=INTEGER},
      learningWorldFabulous = #{learningworldfabulous,jdbcType=INTEGER},
      learningWorldState = #{learningworldstate,jdbcType=INTEGER},
      learningWorldContent = #{learningworldcontent,jdbcType=LONGVARCHAR},
      draftState = #{draftstate,jdbcType=INTEGER},
    where learningWorldId = #{learningworldid,jdbcType=INTEGER}
  </update>
  
  <update id="updateByPrimaryKey" parameterType="com.shensu.pojo.LearningWorld">
    update LearningWorld
    set learningWorldTitle = #{learningworldtitle,jdbcType=VARCHAR},
      learningWorldVideoUrl = #{learningworldvideourl,jdbcType=VARCHAR},
      learningWorldCreatTime = #{learningworldcreattime,jdbcType=VARCHAR},
      learningWorldBrowse = #{learningworldbrowse,jdbcType=INTEGER},
      learningWorldFabulous = #{learningworldfabulous,jdbcType=INTEGER},
      learningWorldState = #{learningworldstate,jdbcType=INTEGER},
      draftState = #{draftstate,jdbcType=INTEGER}
    where learningWorldId = #{learningworldid,jdbcType=INTEGER}
  </update>

    <!-- 查询全部  -->
    <select id="selectAllLearningWorld" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    select * from LearningWorld where 1=1 
  </select>

  
   <!-- 根据条件分页查询正式发布列表 -->
  <select id="selectByIssueCondition" resultMap="BaseResultMap">
		select * from LearningWorld where 1=1
		<if test="learningWorldCreatTime != null">
			and learningWorldCreatTime = #{learningWorldCreatTime}
		</if>
		and draftState = 0
		order by learningWorldCreatTime desc
		<if test="start != null and size != null">
			LIMIT #{start},#{size}
		</if>
	
  </select>
  
  <!-- 根据条件查询总数正式发布列表-->
  <select id="selectCountByIssueCondition" resultType="Integer">
      select count(*) from LearningWorld where 1=1

		<if test="learningWorldCreatTime != null">
			and learningWorldCreatTime = #{learningWorldCreatTime}
		</if>
		and draftState = 0
		<if test="start != null and size != null">
			LIMIT #{start},#{size}
		</if>
  </select>
  
  <!-- 根据条件分页查询 草稿箱列表-->
  <select id="selectByDraftCondition" resultMap="BaseResultMap">
		select * from LearningWorld where 1=1
		<if test="learningworldcreattime != null">
			and learningWorldCreatTime = #{learningworldcreattime}
		</if>
		and draftState = 1
		order by learningWorldCreatTime desc
		<if test="start != null and size != null">
			LIMIT #{start},#{size}
		</if>
	
  </select>
  <!-- 小程序查询学习天地的分页集合 -->
    <select id="selectLWlList" resultMap="BaseResultMap">
		select * from LearningWorld where 
	learningWorldState = 1
		order by learningWorldCreatTime desc
		<if test="start != null and size != null">
			LIMIT #{start},#{size}
		</if>
	
  </select>
  
    <!-- 根据条件分页查询  上架状态的为1 小程序-->
  <select id="selectcountLW" resultType="Integer">
		select count(learningWorldId) from LearningWorld where 

		learningWorldState = 1
		order by learningWorldCreatTime desc
	
	
  </select>
  
  <!-- 根据条件查询总数草稿箱列表 -->
  <select id="selectCountByDraftCondition" resultType="Integer">
      select count(*) from LearningWorld where 1=1

		<if test="learningworldcreattime != null">
			and learningWorldCreatTime = #{learningworldcreattime}
		</if>
		and draftState = 1
		<if test="start != null and size != null">
			LIMIT #{start},#{size}
		</if>
  </select>
  
  <!--学习天地设置上架状态 -->
    <update id="putawayLearningWorld" parameterType="com.shensu.pojo.LearningWorld">
    update 
    	LearningWorld
    set 
      learningWorldState = 1
    where 
    	learningWorldId = #{learningworldid,jdbcType=INTEGER}
  </update>
  
  <!--学习天地设置下架状态 -->
    <update id="unshelveLearningWorld" parameterType="com.shensu.pojo.LearningWorld">
    update 
    	LearningWorld
    set 
      learningWorldState = 0
    where 
    	learningWorldId = #{learningworldid,jdbcType=INTEGER}
  </update>
  
  <!--草稿箱设置上架状态(发布到学习天地) -->
    <update id="putawayLearningWorldDraft" parameterType="com.shensu.pojo.LearningWorld">
    update 
    	LearningWorld
    set 
      learningWorldState = 1,
      draftState = 0
    where 
    	learningWorldId = #{learningworldid,jdbcType=INTEGER}
  </update>
  
  <delete id="deleteLearningWorld" parameterType="java.lang.Integer">
    delete from 
    	LearningWorld	
    where 
    	learningWorldId = #{learningworldid,jdbcType=INTEGER}
  </delete>
  
  <!-- 查询学习天地全部列表已发布的(小程序) -->
  <select id="findLearningList" resultMap="BaseResultMap">
      select * from LearningWorld where draftState = 1 order by learningWorldCreatTime desc
  </select>
  
  <!-- 根据学习天地id查询对应的前三张图片(小程序) -->
  <select id="findBylearningWorldId" resultType="com.shensu.pojo.LearningWorldImg">
  		select learningWorldImgUrl from LearningWorldImg where learningWorldId = #{learningworldid,jdbcType=INTEGER}
  		order by learningWorldImgCreatTime desc limit 0,3
  </select>
  
  <!-- 根据学习天地id查询对应的详细信息(小程序) -->
  <select id="findLearningDetails" resultMap="BaseResultMap1">
  		select * from LearningWorld where learningWorldId = #{learningworldid,jdbcType=INTEGER}
  </select>
    <!-- 根据学习天地id查询对应全部图片(小程序) -->
  <select id="findAllLearningWorld" resultType="com.shensu.pojo.LearningWorldImg">
  		select * from LearningWorldImg where learningWorldId = #{learningworldid,jdbcType=INTEGER}
  </select>
  
  <!-- 查询学习天地文章的浏览量 -->
  <select id="getLearningWorldBrowse" parameterType="java.lang.Integer">
  		select learningWorldBrowse from LearningWorldImg where learningWorldId = #{learningworldid,jdbcType=INTEGER}
  </select>
  
  <!-- 增加浏览量 -->
  <update id="updateLearningWorldBrowse" parameterType="com.shensu.pojo.LearningWorld">
    update 
    	LearningWorld
    set 
      learningWorldBrowse =learningWorldBrowse+1
    where 
    	learningWorldId = #{learningworldid,jdbcType=INTEGER}
  </update>
  
  <!-- 学习天地文章点赞 -->
  <update id="addLearningFabulous" parameterType="com.shensu.pojo.LearningWorld">
    update 
    	LearningWorld
    set 
      learningWorldFabulous = learningWorldFabulous+1
    where 
    	learningWorldId = #{learningWorldId,jdbcType=INTEGER}
  </update>
  
  <!-- 查询学习天地列表全部id-->
  <select id="findLearningId" resultType="com.shensu.pojo.LearningWorld">
  		select learningWorldId from LearningWorld 
  </select>
  
  <!-- 根据学习天地id查询对应的详细信息-->
  <select id="HXLearningWorldDetails" resultMap="BaseResultMap1">
  		select * from LearningWorld where learningWorldId = #{learningworldid,jdbcType=INTEGER}
  </select>
  <!-- 学习天地文章转发 小程序 -->
  <update id="addShare" parameterType="com.shensu.pojo.LearningWorld">
    update 
    	LearningWorld
    set 
      learningWorldForward =#{learningWorldForward,jdbcType=INTEGER}+1
    where 
    	learningWorldId = #{learningworldid,jdbcType=INTEGER}
  </update>
  
</mapper>