<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.shensu.dao.MaintenanceMapper">
  <resultMap id="BaseResultMap" type="com.shensu.pojo.Maintenance">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="maintenanceId" jdbcType="INTEGER" property="maintenanceid" />
    <result column="maintenanceCreatTime" jdbcType="VARCHAR" property="maintenancecreattime" />
    <result column="maintenanceModel" jdbcType="VARCHAR" property="maintenancemodel" />
    <result column="maintenancePlatform" jdbcType="VARCHAR" property="maintenanceplatform" />
    <result column="maintenanceNumber" jdbcType="VARCHAR" property="maintenancenumber" />
    <result column="maintenanceName" jdbcType="VARCHAR" property="maintenancename" />
    <result column="maintenancePhone" jdbcType="VARCHAR" property="maintenancephone" />
    <result column="maintenanceAddress" jdbcType="VARCHAR" property="maintenanceaddress" />
    <result column="maintenanceDetailed" jdbcType="VARCHAR" property="maintenancedetailed" />
    <result column="openId" jdbcType="VARCHAR" property="openid" />
    <result column="maintenanceState" jdbcType="VARCHAR" property="maintenancestate" />
    <result column="readState" jdbcType="INTEGER" property="readstate" />
    <result column="formId" jdbcType="VARCHAR" property="formId" />
  </resultMap>
  <sql id="Base_Column_List">

    maintenanceId, maintenanceCreatTime, maintenanceModel, maintenancePlatform, maintenanceNumber, 
    maintenanceName, maintenancePhone, maintenanceAddress, maintenanceDetailed, openId, maintenanceState, readState,formId
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">

    select 
    <include refid="Base_Column_List" />
    from Maintenance
    where maintenanceId = #{maintenanceid,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">

    delete from Maintenance
    where maintenanceId = #{maintenanceid,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.shensu.pojo.Maintenance">

    insert into Maintenance (maintenanceId, maintenanceCreatTime, 
      maintenanceModel, maintenancePlatform, 
      maintenanceNumber, maintenanceName, maintenancePhone, 
      maintenanceAddress, maintenanceDetailed, 
      openId, maintenanceState, readState)
    values (#{maintenanceid,jdbcType=INTEGER}, #{maintenancecreattime,jdbcType=VARCHAR}, 
      #{maintenancemodel,jdbcType=VARCHAR}, #{maintenanceplatform,jdbcType=VARCHAR}, 
      #{maintenancenumber,jdbcType=VARCHAR}, #{maintenancename,jdbcType=VARCHAR}, #{maintenancephone,jdbcType=VARCHAR}, 
      #{maintenanceaddress,jdbcType=VARCHAR}, #{maintenancedetailed,jdbcType=VARCHAR}, 
      #{openid,jdbcType=VARCHAR}, #{maintenanceState,jdbcType=INTEGER}, #{readState,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="com.shensu.pojo.Maintenance">

    insert into Maintenance
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="maintenanceid != null">
        maintenanceId,
      </if>
      <if test="maintenancecreattime != null">
        maintenanceCreatTime,
      </if>
      <if test="maintenancemodel != null">
        maintenanceModel,
      </if>
      <if test="maintenanceplatform != null">
        maintenancePlatform,
      </if>
      <if test="maintenancenumber != null">
        maintenanceNumber,
      </if>
      <if test="maintenancename != null">
        maintenanceName,
      </if>
      <if test="maintenancephone != null">
        maintenancePhone,
      </if>
      <if test="maintenanceaddress != null">
        maintenanceAddress,
      </if>
      <if test="maintenancedetailed != null">
        maintenanceDetailed,
      </if>
      <if test="openid != null">
        openId,
      </if>
      <if test="maintenancestate != null">
        maintenanceState,
      </if>
      <if test="readstate != null">
        readState,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="maintenanceid != null">
        #{maintenanceid,jdbcType=INTEGER},
      </if>
      <if test="maintenancecreattime != null">
        #{maintenancecreattime,jdbcType=VARCHAR},
      </if>
      <if test="maintenancemodel != null">
        #{maintenancemodel,jdbcType=VARCHAR},
      </if>
      <if test="maintenanceplatform != null">
        #{maintenanceplatform,jdbcType=VARCHAR},
      </if>
      <if test="maintenancenumber != null">
        #{maintenancenumber,jdbcType=VARCHAR},
      </if>
      <if test="maintenancename != null">
        #{maintenancename,jdbcType=VARCHAR},
      </if>
      <if test="maintenancephone != null">
        #{maintenancephone,jdbcType=VARCHAR},
      </if>
      <if test="maintenanceaddress != null">
        #{maintenanceaddress,jdbcType=VARCHAR},
      </if>
      <if test="maintenancedetailed != null">
        #{maintenancedetailed,jdbcType=VARCHAR},
      </if>
      <if test="openid != null">
        #{openid,jdbcType=VARCHAR},
      </if>
      <if test="maintenancestate != null">
        #{maintenanceState,jdbcType=INTEGER},
      </if>
      <if test="readstate != null">
        #{readState,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.shensu.pojo.Maintenance">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update Maintenance
    <set>
      <if test="maintenancecreattime != null">
        maintenanceCreatTime = #{maintenancecreattime,jdbcType=VARCHAR},
      </if>
      <if test="maintenancemodel != null">
        maintenanceModel = #{maintenancemodel,jdbcType=VARCHAR},
      </if>
      <if test="maintenanceplatform != null">
        maintenancePlatform = #{maintenanceplatform,jdbcType=VARCHAR},
      </if>
      <if test="maintenancenumber != null">
        maintenanceNumber = #{maintenancenumber,jdbcType=VARCHAR},
      </if>
      <if test="maintenancename != null">
        maintenanceName = #{maintenancename,jdbcType=VARCHAR},
      </if>
      <if test="maintenancephone != null">
        maintenancePhone = #{maintenancephone,jdbcType=VARCHAR},
      </if>
      <if test="maintenanceaddress != null">
        maintenanceAddress = #{maintenanceaddress,jdbcType=VARCHAR},
      </if>
      <if test="maintenancedetailed != null">
        maintenanceDetailed = #{maintenancedetailed,jdbcType=VARCHAR},
      </if>
      <if test="openid != null">
        openId = #{openid,jdbcType=VARCHAR},
      </if>
      <if test="maintenancestate != null">
        maintenanceState = #{maintenancestate,jdbcType=INTEGER},
      </if>
      <if test="readstate != null">
        readState = #{readstate,jdbcType=INTEGER},
      </if>
    </set>
    where maintenanceId = #{maintenanceid,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.shensu.pojo.Maintenance">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update Maintenance
    set maintenanceCreatTime = #{maintenancecreattime,jdbcType=VARCHAR},
      maintenanceModel = #{maintenancemodel,jdbcType=VARCHAR},
      maintenancePlatform = #{maintenanceplatform,jdbcType=VARCHAR},
      maintenanceNumber = #{maintenancenumber,jdbcType=VARCHAR},
      maintenanceName = #{maintenancename,jdbcType=VARCHAR},
      maintenancePhone = #{maintenancephone,jdbcType=VARCHAR},
      maintenanceAddress = #{maintenanceaddress,jdbcType=VARCHAR},
      maintenanceDetailed = #{maintenancedetailed,jdbcType=VARCHAR},
      openId = #{openid,jdbcType=VARCHAR},
      maintenanceState = #{maintenancestate,jdbcType=INTEGER},
      readState = #{readstate,jdbcType=INTEGER}
    where maintenanceId = #{maintenanceid,jdbcType=INTEGER}
  </update>
  
  <!-- 添加维修申请信息(小程序)-->
  <insert id="addMaintenanceMsg" parameterType="com.shensu.pojo.Maintenance">
    insert into Maintenance
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="maintenanceid != null">
        maintenanceId,
      </if>
      <if test="maintenancecreattime != null">
        maintenanceCreatTime,
      </if>
      <if test="maintenancemodel != null">
        maintenanceModel,
      </if>
      <if test="maintenanceplatform != null">
        maintenancePlatform,
      </if>
      <if test="maintenancenumber != null">
        maintenanceNumber,
      </if>
      <if test="maintenancename != null">
        maintenanceName,
      </if>
      <if test="maintenancephone != null">
        maintenancePhone,
      </if>
      <if test="maintenanceaddress != null">
        maintenanceAddress,
      </if>
      <if test="maintenancedetailed != null">
        maintenanceDetailed,
      </if>
      <if test="openid != null">
        openId,
      </if>
      <if test="maintenancestate != null">
        maintenanceState,
      </if>
       <if test="readstate != null">
        readState,
      </if>
           <if test="formId != null">
        formId,
      </if>
      
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="maintenanceid != null">
        #{maintenanceid,jdbcType=INTEGER},
      </if>
      <if test="maintenancecreattime != null">
        #{maintenancecreattime,jdbcType=VARCHAR},
      </if>
      <if test="maintenancemodel != null">
        #{maintenancemodel,jdbcType=VARCHAR},
      </if>
      <if test="maintenanceplatform != null">
        #{maintenanceplatform,jdbcType=VARCHAR},
      </if>
      <if test="maintenancenumber != null">
        #{maintenancenumber,jdbcType=VARCHAR},
      </if>
      <if test="maintenancename != null">
        #{maintenancename,jdbcType=VARCHAR},
      </if>
      <if test="maintenancephone != null">
        #{maintenancephone,jdbcType=VARCHAR},
      </if>
      <if test="maintenanceaddress != null">
        #{maintenanceaddress,jdbcType=VARCHAR},
      </if>
      <if test="maintenancedetailed != null">
        #{maintenancedetailed,jdbcType=VARCHAR},
      </if>
      <if test="openid != null">
        #{openid,jdbcType=VARCHAR},
      </if>
      <if test="maintenancestate != null">
        #{maintenancestate,jdbcType=INTEGER},
      </if>
      <if test="readstate != null">
        #{readstate,jdbcType=INTEGER},
      </if>
      <if test="formId != null">
        #{formId,jdbcType=VARCHAR},
      </if>
      
    </trim>
  </insert>
  
  <!-- 根据条件分页查询 -->
  <select id="selectByCondition" resultMap="BaseResultMap">
       
		select * from Maintenance where 1=1


		<if test="maintenanceName != null">
			and maintenanceName = #{maintenanceName}
		</if>
		
		<if test="maintenancemodel != null">
			and maintenanceModel = #{maintenancemodel}
		</if>
		
		<if test="maintenancePhone != null">
			and maintenancePhone = #{maintenancePhone}
		</if>
		order by maintenanceCreatTime desc
		<if test="start != null and size != null">
			LIMIT #{start},#{size}
		</if>
	
  </select>
  
  <!-- 根据条件查询总数 -->
  <select id="selectCountByCondition" resultType="Integer">
      select count(*) from Maintenance where 1=1
        
        <if test="maintenanceName != null">
			and maintenanceName = #{maintenanceName}
		</if>
		
		<if test="maintenancemodel != null">
			and maintenanceModel = #{maintenancemodel}
		</if>
		
		<if test="maintenancePhone != null">
			and maintenancePhone=#{maintenancePhone}
		</if>
		<if test="start != null and size != null">
			LIMIT #{start},#{size}
		</if>
  </select>
  
  <!--查询单条维修全部信息 -->
  <select id="findMaintenanceMsgDetails" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    select 
    	maintenanceId, maintenanceCreatTime, maintenanceModel, 
    	maintenancePlatform, maintenanceNumber,maintenanceName, 
    	maintenancePhone, maintenanceAddress, maintenanceDetailed, 
    	openId, maintenanceState, readState
    from 
    	Maintenance
    where 
    	maintenanceId = #{maintenanceid,jdbcType=INTEGER}
  </select>
  
  <!-- 审核通过 -->
  <update id="auditSuccess" parameterType="com.shensu.pojo.Maintenance">
    update 
    	Maintenance
    set 
      	maintenanceState = 1
    where 
    	maintenanceId = #{maintenanceid,jdbcType=INTEGER}
  </update>
  
  <!-- 审核不通过 -->
  <update id="auditFail" parameterType="com.shensu.pojo.Maintenance">
    update 
    	Maintenance
    set 
      	maintenanceState = 2
    where 
    	maintenanceId = #{maintenanceid,jdbcType=INTEGER}
  </update>
  
  <!-- 删除维修申请信息 -->
  <delete id="deleteMaintenanceMsg" parameterType="java.lang.Integer">
    delete
     	from Maintenance
    where 
    	maintenanceId = #{maintenanceid,jdbcType=INTEGER}
  </delete>
  
  <!-- 设置阅读状态为已读 -->
  <update id="finishRead" parameterType="com.shensu.pojo.Maintenance">
    update 
    	Maintenance
    set 
      	readState = 1
    where 
    	maintenanceId = #{maintenanceid,jdbcType=INTEGER}
  </update>
  
  <!-- 统计维修管理未读消息总数 -->
  <select id="findAllUnRead" resultType="Integer" >
    select 
    	count(*)
    from 
    	Maintenance
    where 
    	readState = 0
  </select>
  
</mapper>